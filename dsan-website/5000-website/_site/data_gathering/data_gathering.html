<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>DSAN-5000: Project – data_gathering</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">DSAN-5000: Project</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html" rel="" target="">
 <span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about_me/about.html" rel="" target="">
 <span class="menu-text">About Me</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/anly501/dsan-5000-project-qinxuesherry/tree/main/codes" rel="" target="">
 <span class="menu-text">Code</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/anly501/dsan-5000-project-qinxuesherry/tree/main/data" rel="" target="">
 <span class="menu-text">Data</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../data_gathering/data_gathering.html" rel="" target="" aria-current="page">
 <span class="menu-text">Data Gathering</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../data_cleaning/data_cleaning.html" rel="" target="">
 <span class="menu-text">Data cleaning</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-clustering" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Clustering</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-clustering">    
        <li>
    <a class="dropdown-item" href="../clustering/clustering1.html" rel="" target="">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../clustering/clustering.html" rel="" target="">
 <span class="dropdown-text">Methods &amp; Codes</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../clustering/Results.html" rel="" target="">
 <span class="dropdown-text">Results Analysis &amp; Conclusion</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../dimensionality_reduction/reduction.html" rel="" target="">
 <span class="menu-text">Dimensionality Reduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../decision_trees/tree.html" rel="" target="">
 <span class="menu-text">Decision Trees</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../eda/eda.html" rel="" target="">
 <span class="menu-text">Data Exploration</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../Naive_Bayes/Naive_Bayes.html" rel="" target="">
 <span class="menu-text">Naïve Bayes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../ARM/ARM.html" rel="" target="">
 <span class="menu-text">ARM</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../conclusion/conclusion.html" rel="" target="">
 <span class="menu-text">Conclusion</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#data-gathering" id="toc-data-gathering" class="nav-link active" data-scroll-target="#data-gathering">Data Gathering</a>
  <ul class="collapse">
  <li><a href="#main-goal" id="toc-main-goal" class="nav-link" data-scroll-target="#main-goal">Main Goal</a></li>
  <li><a href="#dataset-finding" id="toc-dataset-finding" class="nav-link" data-scroll-target="#dataset-finding">Dataset finding</a></li>
  <li><a href="#tools-using" id="toc-tools-using" class="nav-link" data-scroll-target="#tools-using">Tools using</a></li>
  <li><a href="#data-gathering-1" id="toc-data-gathering-1" class="nav-link" data-scroll-target="#data-gathering-1">Data Gathering</a>
  <ul class="collapse">
  <li><a href="#gathering-data-of-hot-posts-from-weibo" id="toc-gathering-data-of-hot-posts-from-weibo" class="nav-link" data-scroll-target="#gathering-data-of-hot-posts-from-weibo">Gathering data of hot posts from Weibo</a></li>
  <li><a href="#gathering-data-of-news-text" id="toc-gathering-data-of-news-text" class="nav-link" data-scroll-target="#gathering-data-of-news-text">Gathering data of news text</a></li>
  <li><a href="#gathering-data-of-news-from-website" id="toc-gathering-data-of-news-from-website" class="nav-link" data-scroll-target="#gathering-data-of-news-from-website">Gathering data of news from website</a></li>
  <li><a href="#stock-data-from-yahoo-finance" id="toc-stock-data-from-yahoo-finance" class="nav-link" data-scroll-target="#stock-data-from-yahoo-finance">Stock data from Yahoo! Finance</a></li>
  <li><a href="#mobile-phones-function-rating" id="toc-mobile-phones-function-rating" class="nav-link" data-scroll-target="#mobile-phones-function-rating">Mobile phones function rating</a></li>
  <li><a href="#iphone_11_review_dataset" id="toc-iphone_11_review_dataset" class="nav-link" data-scroll-target="#iphone_11_review_dataset">iphone_11_review_dataset</a></li>
  <li><a href="#conclusion-and-next-step" id="toc-conclusion-and-next-step" class="nav-link" data-scroll-target="#conclusion-and-next-step">Conclusion and Next Step</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<section id="data-gathering" class="level1">
<h1>Data Gathering</h1>
<section id="main-goal" class="level2">
<h2 class="anchored" data-anchor-id="main-goal">Main Goal</h2>
<p>For this project, the main point is to find people’s attitudes towards Apple Products and evaluate what kind of mobile products would attract the public to purchase. Thus, I need to see both text data to reflect people’s attitudes toward Apple Products and record data to evaluate the products’ popularity and people’s willingness to buy. Thus, I need to search online to find either people’s comments about Apple Products or the news reports related to Apple products. Also, I need to find some datasets to evaluate what kinds of mobile products would be popular in the market so that when the new generation of Apple Products comes out, we can predict the popularity of the new products.</p>
</section>
<section id="dataset-finding" class="level2">
<h2 class="anchored" data-anchor-id="dataset-finding">Dataset finding</h2>
<ul>
<li>News API: Gathering news’ reports to reflect the public attitudes towards Apple products.</li>
<li>News Webpage: Collect more news reports to reflect the public attitudes</li>
<li>Weibo: Crawl comments from the social media to see the users’ reaction to the new Apple Products</li>
<li>Yahoo! Finance: collect Apple’s recent stock performance and this also can reflect the apple products’ popularity.</li>
<li>Mobile phone ratings: trying to find a dataset that have ratings related to all different functions of the mobile phones and what their popularity with the mobile phones.</li>
</ul>
</section>
<section id="tools-using" class="level2">
<h2 class="anchored" data-anchor-id="tools-using">Tools using</h2>
<ul>
<li>Python</li>
<li>R</li>
<li>News API</li>
<li>Downloading Dataset</li>
</ul>
</section>
<section id="data-gathering-1" class="level2">
<h2 class="anchored" data-anchor-id="data-gathering-1">Data Gathering</h2>
<section id="gathering-data-of-hot-posts-from-weibo" class="level3">
<h3 class="anchored" data-anchor-id="gathering-data-of-hot-posts-from-weibo">Gathering data of hot posts from Weibo</h3>
<ul>
<li>Python, Web crawl</li>
<li>Dataset Collecrion: Weibo is a Chinese social platform that Chinese public sharing thoughts and post articles. There are 52 illion daily active users via that social media.I crawled data from Weibo to catch some hot posts about people’s reaction to the new publishion of Apple products. Most of the articles relected strong sentiments towards the products</li>
<li><a href="https://github.com/anly501/dsan-5000-project-qinxuesherry/blob/main/codes/01-data-gathering/wb_python_gathering.py">weibo data gathering code (python)</a></li>
<li><a href="https://github.com/anly501/dsan-5000-project-qinxuesherry/blob/main/data/00-raw-data/%E5%BE%AE%E5%8D%9A%E6%B8%85%E5%8D%95.csv">raw data for weibo(python)</a></li>
<li>sample raw data <img src="../images/weibo_raw.png" class="img-fluid" alt="weibo raw data Python"></li>
<li>Dataset Exaplaination: From the view of dataset, this is a text dataset and we can see the users’ ID and the publish dates and also the contents and commens(in Chinese).</li>
</ul>
</section>
<section id="gathering-data-of-news-text" class="level3">
<h3 class="anchored" data-anchor-id="gathering-data-of-news-text">Gathering data of news text</h3>
<ul>
<li>Python, News API</li>
<li>Dataset Collection: crawl data by using NewsAPI with Python and try to extract some key words from the news. The news API can help me to find the most updated articles related to the topics I am trying to search and based on the contens, I can analyze those text to see what’s the attitude of media towards the iPhone.</li>
<li><a href="https://github.com/anly501/dsan-5000-project-qinxuesherry/blob/main/codes/01-data-gathering/news_python_gathering.py">News data gathering code (python)</a></li>
<li><a href="https://github.com/anly501/dsan-5000-project-qinxuesherry/blob/main/data/00-raw-data/iphone_content.txt">raw data for newsAPI(python)</a></li>
<li>sample raw data <img src="../images/news_raw.png" class="img-fluid" alt="news raw data Python"></li>
<li>Dataset Exaplaination: As shown above, this is a text dataset and we can read all the articles that News API collected.</li>
</ul>
</section>
<section id="gathering-data-of-news-from-website" class="level3">
<h3 class="anchored" data-anchor-id="gathering-data-of-news-from-website">Gathering data of news from website</h3>
<ul>
<li>R, Rvest</li>
<li>Dataset Collection: Revest is also an useful tool to help up to crawl conetent from the website we want. I used Rvest to craw text with R and get content from the news website I selected.</li>
<li><a href="https://github.com/anly501/dsan-5000-project-qinxuesherry/blob/main/codes/01-data-gathering/r_gathering.Rmd">News webpage data gathering code (R)</a></li>
<li><a href="https://github.com/anly501/dsan-5000-project-qinxuesherry/blob/main/data/00-raw-data/R_raw_data.csv">raw data for news webpage(R)</a></li>
<li>sample raw data <img src="../images/newsweb_raw_R.png" class="img-fluid" alt="news webpage raw data R"></li>
<li>Dataset Exaplaination: as shown in above, as shown above, this is also a text dataset and we can read all the articles that Rvest collected.</li>
</ul>
</section>
<section id="stock-data-from-yahoo-finance" class="level3">
<h3 class="anchored" data-anchor-id="stock-data-from-yahoo-finance">Stock data from Yahoo! Finance</h3>
<ul>
<li>Downloading from Yahoo! Finance</li>
<li>Dataset Collection: Stock price and trend also can reflect the company’s popularity and how the public’s attitude towards the company. Thus I downloaded the Apple stock’s recent stock price and trying to analyze its stock trend.</li>
<li><a href="https://finance.yahoo.com/quote/AAPL?p=AAPL&amp;.tsrc=fin-srch">Dataset source: Apple Stock in Yahoo! Finance</a></li>
<li>sample raw data <img src="../images/apple_stock_dataset.png" class="img-fluid" alt="Apple Stock Dataset"></li>
<li>Dataset Explaination: As shown in the dataset, this is a record dataset. We can see there’s the date, Openprice, highest price, lowest Price, close price, and trading volume. Based on this dataset, for nect next step we can analyze its stock prices changes.</li>
</ul>
</section>
<section id="mobile-phones-function-rating" class="level3">
<h3 class="anchored" data-anchor-id="mobile-phones-function-rating">Mobile phones function rating</h3>
<ul>
<li>Collecting from Dxomark</li>
<li>Dataset collection: The dataset that evaluate the functions for a mobile phone can help me to identify the public’s buying willingness to the product. Thus I collected the dataset from the DXOMARK website that reflect the device’s performance and the quality of the user experience.</li>
<li><a href="https://www.dxomark.com/smartphones/">Dataset source: DXOMARK smartphone reviews</a></li>
<li>sample raw data <img src="../images/mobile_rating_dataset.png" class="img-fluid" alt="Mobile Phone Ratings"></li>
<li>Dataset Explaination: As shown in the dataset, this is a record dataset. The dataset has its ranking and devices’ name, its Launch price, Launche date, camera rating, selfie rating, audio rating, display rating and battery ratings. All those ratings are important factors that impact the customers’ buying inetent. Thus this dataset will help me to predict wether a smartphone product will be popular based on the ratings.</li>
</ul>
</section>
<section id="iphone_11_review_dataset" class="level3">
<h3 class="anchored" data-anchor-id="iphone_11_review_dataset">iphone_11_review_dataset</h3>
<ul>
<li>Kaggle dataset</li>
<li>Dataset collection: This dataset is both record and text data. I download it from the kaggle website. This dataset can help me better understand people’s reaction and reviews towards apple products.</li>
<li><a href="https://www.kaggle.com/datasets/thedevastator/apple-iphone-11-reviews-from-amazon-com/data">Dataset source: Kaggles</a></li>
<li>sample raw data <img src="../images/iphone11_review_dataset.png" class="img-fluid" alt="Mobile Phone Ratings"></li>
<li>Dataset Explaination: the dataset includs the customers’ reviews and ratings from Amazon for iphone 11. The text contained people’s reviews and comments. The record data are related to people’s ratings, helpful counts, review country, etc. For this dataset, I will simply use for the data explortion process for better understand this topic.</li>
</ul>
</section>
<section id="conclusion-and-next-step" class="level3">
<h3 class="anchored" data-anchor-id="conclusion-and-next-step">Conclusion and Next Step</h3>
<p>In this part, I collected 6 different datasets that related to my research topic, Apple Products’ Popularity. The datasets are including text data and record data. The methods I used to collect data are using news API, crawling data with Python, Rvest with R, and downloading related data directly from the website.</p>
<p>Next step I will clean and modified the data as need for preparing for the future model training.</p>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>